{
  "name": "NongkrongrDB",
  "tables": [
    {
      "name": "vibes",
      "columns": [
        { "name": "id", "type": "text", "is_primary_key": true },
        { "name": "name", "type": "text" },
        { "name": "created_at", "type": "timestamptz", "default": "now()" }
      ],
      "csv_file": "vibes.csv"
    },
    {
      "name": "amenities",
      "columns": [
        { "name": "id", "type": "text", "is_primary_key": true },
        { "name": "name", "type": "text" },
        { "name": "icon", "type": "text" },
        { "name": "created_at", "type": "timestamptz", "default": "now()" }
      ],
      "csv_file": "amenities.csv"
    },
    {
      "name": "profiles",
      "columns": [
        { "name": "id", "type": "uuid", "is_primary_key": true, "references": "auth.users(id)" },
        { "name": "username", "type": "text", "is_unique": true },
        { "name": "email", "type": "text", "is_unique": true },
        { "name": "role", "type": "text", "default": "user" },
        { "name": "status", "type": "text", "default": "active" },
        { "name": "avatar_url", "type": "text", "is_nullable": true }
      ],
      "csv_file": "profiles.csv"
    },
    {
      "name": "tags",
      "columns": [
        { "name": "id", "type": "text", "is_primary_key": true },
        { "name": "name", "type": "text", "is_unique": true },
        { "name": "created_by", "type": "uuid", "references": "profiles(id)", "on_delete": "set null", "is_nullable": true },
        { "name": "created_at", "type": "timestamptz", "default": "now()" }
      ],
      "csv_file": "tags.csv"
    },
    {
      "name": "cafes",
      "columns": [
        { "name": "id", "type": "text", "is_primary_key": true },
        { "name": "slug", "type": "text", "is_unique": true },
        { "name": "name", "type": "text" },
        { "name": "description", "type": "text" },
        { "name": "address", "type": "text" },
        { "name": "city", "type": "text" },
        { "name": "district", "type": "text" },
        { "name": "openingHours", "type": "text" },
        { "name": "priceTier", "type": "smallint" },
        { "name": "lat", "type": "float8" },
        { "name": "lng", "type": "float8" },
        { "name": "isSponsored", "type": "boolean", "default": false },
        { "name": "sponsoredUntil", "type": "timestamptz", "is_nullable": true },
        { "name": "sponsoredRank", "type": "integer", "is_nullable": true },
        { "name": "logoUrl", "type": "text", "is_nullable": true },
        { "name": "coverUrl", "type": "text" },
        { "name": "manager_id", "type": "uuid", "references": "profiles(id)", "on_delete": "set null", "is_nullable": true },
        { "name": "created_by", "type": "uuid", "references": "profiles(id)", "on_delete": "set null", "is_nullable": true },
        { "name": "created_at", "type": "timestamptz", "default": "now()" },
        { "name": "status", "type": "text", "default": "pending" },
        { "name": "phoneNumber", "type": "text", "is_nullable": true },
        { "name": "websiteUrl", "type": "text", "is_nullable": true }
      ],
      "csv_file": "cafes.csv"
    },
    {
      "name": "reviews",
      "columns": [
        { "name": "id", "type": "text", "is_primary_key": true },
        { "name": "cafe_id", "type": "text", "references": "cafes(id)", "on_delete": "cascade" },
        { "name": "author_id", "type": "uuid", "references": "profiles(id)", "on_delete": "set null", "is_nullable": true },
        { "name": "ratingAesthetic", "type": "smallint" },
        { "name": "ratingWork", "type": "smallint" },
        { "name": "crowdMorning", "type": "smallint" },
        { "name": "crowdAfternoon", "type": "smallint" },
        { "name": "crowdEvening", "type": "smallint" },
        { "name": "priceSpent", "type": "integer" },
        { "name": "text", "type": "text" },
        { "name": "photos", "type": "text[]" },
        { "name": "createdAt", "type": "timestamptz", "default": "now()" },
        { "name": "status", "type": "text", "default": "pending" },
        { "name": "helpful_count", "type": "integer", "default": 0 }
      ],
      "csv_file": "reviews.csv"
    },
    {
      "name": "spots",
      "columns": [
        { "name": "id", "type": "text", "is_primary_key": true },
        { "name": "cafe_id", "type": "text", "references": "cafes(id)", "on_delete": "cascade" },
        { "name": "title", "type": "text" },
        { "name": "tip", "type": "text" },
        { "name": "photoUrl", "type": "text" },
        { "name": "created_at", "type": "timestamptz", "default": "now()" }
      ],
      "csv_file": "spots.csv"
    },
    {
      "name": "events",
      "columns": [
        { "name": "id", "type": "text", "is_primary_key": true },
        { "name": "cafe_id", "type": "text", "references": "cafes(id)", "on_delete": "cascade" },
        { "name": "name", "type": "text" },
        { "name": "description", "type": "text" },
        { "name": "start_date", "type": "timestamptz" },
        { "name": "end_date", "type": "timestamptz" },
        { "name": "imageUrl", "type": "text", "is_nullable": true },
        { "name": "created_at", "type": "timestamptz", "default": "now()" }
      ]
    },
    {
      "name": "feedback",
      "columns": [
        { "name": "id", "type": "bigint", "is_primary_key": true, "is_identity": true },
        { "name": "created_at", "type": "timestamptz", "default": "now()" },
        { "name": "name", "type": "text" },
        { "name": "message", "type": "text" },
        { "name": "user_id", "type": "uuid", "references": "profiles(id)", "on_delete": "set null", "is_nullable": true },
        { "name": "status", "type": "text", "default": "new" }
      ]
    },
    {
      "name": "cafe_vibes",
      "columns": [
        { "name": "cafe_id", "type": "text", "is_primary_key": true, "references": "cafes(id)", "on_delete": "cascade" },
        { "name": "vibe_id", "type": "text", "is_primary_key": true, "references": "vibes(id)", "on_delete": "cascade" }
      ],
      "csv_file": "cafe_vibes.csv"
    },
    {
      "name": "cafe_amenities",
      "columns": [
        { "name": "cafe_id", "type": "text", "is_primary_key": true, "references": "cafes(id)", "on_delete": "cascade" },
        { "name": "amenity_id", "type": "text", "is_primary_key": true, "references": "amenities(id)", "on_delete": "cascade" }
      ],
      "csv_file": "cafe_amenities.csv"
    },
     {
      "name": "cafe_tags",
      "columns": [
        { "name": "cafe_id", "type": "text", "is_primary_key": true, "references": "cafes(id)", "on_delete": "cascade" },
        { "name": "tag_id", "type": "text", "is_primary_key": true, "references": "tags(id)", "on_delete": "cascade" }
      ],
      "csv_file": "cafe_tags.csv"
    },
    {
      "name": "user_favorites",
      "columns": [
        { "name": "user_id", "type": "uuid", "is_primary_key": true, "references": "profiles(id)", "on_delete": "cascade" },
        { "name": "cafe_id", "type": "text", "is_primary_key": true, "references": "cafes(id)", "on_delete": "cascade" }
      ]
    },
    {
      "name": "settings",
      "columns": [
        { "name": "key", "type": "text", "is_primary_key": true },
        { "name": "value", "type": "text" },
        { "name": "created_at", "type": "timestamptz", "default": "now()" }
      ],
      "csv_file": "settings.csv"
    },
    {
      "name": "cafe_status_logs",
      "columns": [
        { "name": "id", "type": "bigint", "is_primary_key": true, "is_identity": true },
        { "name": "cafe_id", "type": "text", "references": "cafes(id)", "on_delete": "cascade" },
        { "name": "old_status", "type": "text" },
        { "name": "new_status", "type": "text" },
        { "name": "changed_by", "type": "uuid", "references": "profiles(id)", "on_delete": "set null", "is_nullable": true },
        { "name": "changed_at", "type": "timestamptz", "default": "now()" }
      ],
      "csv_file": "cafe_status_logs.csv"
    },
    {
      "name": "user_notifications_state",
      "columns": [
        { "name": "user_id", "type": "uuid", "is_primary_key": true, "references": "profiles(id)", "on_delete": "cascade" },
        { "name": "notification_id", "type": "text", "is_primary_key": true },
        { "name": "is_read", "type": "boolean", "default": false },
        { "name": "is_deleted", "type": "boolean", "default": false },
        { "name": "updated_at", "type": "timestamptz", "default": "now()" }
      ]
    }
  ]
}